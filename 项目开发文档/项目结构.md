# MeetMind 项目结构

> 详细的目录结构和文件说明

---

## 目录结构

```
meetmind/
├── server.js                    # 自定义服务器 (WebSocket ASR 代理 + Next.js)
├── package.json                 # 项目依赖
├── .env.example                 # 环境变量示例
├── next.config.js               # Next.js 配置
├── tailwind.config.js           # Tailwind CSS 配置
├── tsconfig.json                # TypeScript 配置
│
├── public/                      # 静态资源
│   └── demo.mp3                 # 演示音频
│
└── src/
    ├── middleware.ts            # Next.js 中间件 (认证、路由控制)
    │
    ├── app/                     # Next.js App Router 页面
    │   ├── layout.tsx           # 根布局 (AuthProvider)
    │   ├── page.tsx             # 学生端首页 (录音/复习)
    │   ├── globals.css          # 全局样式
    │   │
    │   ├── parent/              # 家长端
    │   │   └── page.tsx         # 日报查看、陪学脚本
    │   │
    │   ├── teacher/             # 教师端
    │   │   └── page.tsx         # 困惑热点、教学反思
    │   │
    │   ├── all-notes/           # 全部笔记页面
    │   │   └── page.tsx
    │   │
    │   ├── (auth)/              # 认证相关页面组
    │   │   ├── login/page.tsx
    │   │   ├── register/page.tsx
    │   │   └── profile/page.tsx
    │   │
    │   └── api/                 # API 路由
    │       ├── auth/            # 认证 API (登录/注册/微信)
    │       ├── tutor/route.ts   # AI 家教核心 API
    │       ├── chat/route.ts    # 通用 AI 对话
    │       ├── transcribe/      # 语音转录 (同步/异步)
    │       ├── generate-topics/ # 精选片段生成
    │       ├── generate-summary/# 课堂摘要生成
    │       ├── upload-audio/    # 音频上传
    │       └── asr-config/      # ASR 配置
    │
    ├── components/              # React 组件
    │   ├── index.ts             # 统一导出
    │   │
    │   │   # 核心音频组件
    │   ├── Recorder.tsx         # 录音器 (实时 ASR)
    │   ├── AudioPlayer.tsx      # 音频播放器
    │   ├── WaveformPlayer.tsx   # 波形播放器 (WaveSurfer)
    │   │
    │   │   # AI 交互组件
    │   ├── AITutor.tsx          # AI 家教面板
    │   ├── AIChat.tsx           # AI 对话组件
    │   ├── ModelSelector.tsx    # 模型选择器
    │   │
    │   │   # 时间轴与内容组件
    │   ├── TimelineView.tsx     # 时间轴视图
    │   ├── HighlightsPanel.tsx  # 精选片段面板
    │   ├── SummaryPanel.tsx     # 课堂摘要面板
    │   ├── NotesPanel.tsx       # 笔记面板
    │   │
    │   │   # 可视化组件
    │   ├── ConfusionHeatmap.tsx # 困惑热力图
    │   │
    │   │   # 布局组件
    │   ├── Header.tsx           # 页头导航
    │   ├── ActionList.tsx       # 行动清单
    │   │
    │   └── teacher/             # 教师端专用组件
    │       ├── TeacherDashboard.tsx     # 教师仪表盘
    │       ├── ConfusionHotspotCard.tsx # 困惑热点卡片
    │       └── ReflectionGenerator.tsx  # 教学反思生成器
    │
    ├── lib/                     # 核心库
    │   ├── config.ts            # 应用配置
    │   ├── db.ts                # IndexedDB 数据库 (Dexie)
    │   │
    │   ├── services/            # 服务层
    │   │   ├── index.ts         # 统一导出
    │   │   │
    │   │   │   # AI/LLM 服务
    │   │   ├── llm-service.ts           # LLM 调用封装 (通义千问)
    │   │   ├── dify-service.ts          # Dify 工作流服务
    │   │   ├── tutor-service.ts         # AI 家教服务
    │   │   │
    │   │   │   # ASR 语音识别
    │   │   ├── qwen-asr-service.ts      # 通义千问 ASR (同步/异步)
    │   │   ├── dashscope-asr-service.ts # DashScope 实时 ASR 客户端
    │   │   │
    │   │   │   # 核心业务服务
    │   │   ├── meetmind-service.ts      # MeetMind 核心业务
    │   │   ├── anchor-service.ts        # 困惑点管理
    │   │   ├── memory-service.ts        # 时间轴记忆服务
    │   │   ├── classroom-data-service.ts# 课堂数据共享 (学生↔教师)
    │   │   │
    │   │   │   # 内容生成服务
    │   │   ├── highlight-service.ts     # 精选片段生成
    │   │   ├── summary-service.ts       # 课堂摘要生成
    │   │   ├── note-service.ts          # 笔记服务
    │   │   │
    │   │   │   # 角色专用服务
    │   │   ├── parent-service.ts        # 家长端服务
    │   │   └── teaching-suggestion.ts   # 教学建议生成
    │   │
    │   ├── hooks/               # 自定义 Hooks
    │   │   └── useAuth.tsx      # 认证 Hook
    │   │
    │   └── longcut/             # 时间轴处理工具
    │       └── ...
    │
    ├── types/                   # TypeScript 类型定义
    │   ├── index.ts             # 核心业务类型
    │   ├── user.ts              # 用户/认证类型
    │   └── dify.ts              # Dify 服务类型
    │
    └── fixtures/                # 演示数据
        └── demo-data.ts         # 统一演示数据源
```

---

## 核心目录说明

### `/src/app` - 页面路由

使用 Next.js App Router，按文件系统路由组织：

| 路径 | 说明 |
|------|------|
| `/` | 学生端首页（录音/复习模式） |
| `/parent` | 家长端（日报、陪学脚本） |
| `/teacher` | 教师端（困惑热点、教学反思） |
| `/all-notes` | 全部笔记页面 |
| `/(auth)/*` | 认证页面组（登录/注册/个人中心） |
| `/api/*` | API 路由 |

### `/src/components` - React 组件

按功能分类组织：

| 分类 | 组件 |
|------|------|
| 音频组件 | Recorder, AudioPlayer, WaveformPlayer |
| AI 交互 | AITutor, AIChat, ModelSelector |
| 时间轴 | TimelineView, HighlightsPanel, SummaryPanel |
| 可视化 | ConfusionHeatmap |
| 布局 | Header, ActionList |
| 教师端 | TeacherDashboard, ConfusionHotspotCard, ReflectionGenerator |

### `/src/lib/services` - 服务层

业务逻辑封装：

| 分类 | 服务 |
|------|------|
| AI/LLM | llm-service, dify-service, tutor-service |
| ASR | qwen-asr-service, dashscope-asr-service |
| 核心业务 | meetmind-service, anchor-service, memory-service |
| 内容生成 | highlight-service, summary-service, note-service |
| 角色专用 | parent-service, teaching-suggestion |

### `/src/types` - 类型定义

| 文件 | 说明 |
|------|------|
| `index.ts` | 核心业务类型（Anchor, TranscriptSegment, ClassTimeline 等） |
| `user.ts` | 用户/认证类型（User, UserRole, ParentStudentLink 等） |
| `dify.ts` | Dify 服务类型 |

---

*文档版本：v1.0*  
*从 README.md 拆分*
